{% extends 'base.html' %}

{% block content %}
<style>
Â  Â  :root {
Â  Â  Â  Â  --bg-light: #f4f6fb;
Â  Â  Â  Â  --bg-dark: #181c2f;
Â  Â  Â  Â  --text-light: #232946;
Â  Â  Â  Â  --text-dark: #f4f6fb;
Â  Â  Â  Â  --card-bg-light: #fff;
Â  Â  Â  Â  --card-bg-dark: #232946;
Â  Â  Â  Â  --primary-color: #6366f1;
Â  Â  Â  Â  --primary-dark: #4f46e5;
Â  Â  Â  Â  --accent: #16a085;
Â  Â  Â  Â  --border-radius: 1.25rem;
Â  Â  Â  Â  --shadow: 0 8px 32px rgba(44,62,80,0.10);
Â  Â  Â  Â  --input-bg: #f8fafc;
Â  Â  Â  Â  --input-bg-dark: #232946;
Â  Â  Â  Â  --input-border: #d1d5db;
Â  Â  Â  Â  --input-border-dark: #3b4252;
Â  Â  Â  Â  --alert-bg: #e0e7ff;
Â  Â  Â  Â  --alert-bg-dark: #373a53;
Â  Â  Â  Â  --alert-text: #3730a3;
Â  Â  Â  Â  --alert-text-dark: #a5b4fc;
Â  Â  }
Â  Â  body {
Â  Â  Â  Â  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
Â  Â  Â  Â  font-size: 1.05rem;
Â  Â  Â  Â  letter-spacing: 0.01em;
Â  Â  Â  Â  background: var(--bg-light);
Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  transition: background 0.3s, color 0.3s;
Â  Â  }
Â  Â  body.dark-mode {
Â  Â  Â  Â  background: var(--bg-dark);
Â  Â  Â  Â  color: var(--text-dark);
Â  Â  }
Â  Â  .center-wrapper {
Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  padding: 2rem;
Â  Â  Â  Â  background: linear-gradient(120deg, #e0e7ff 0%, #f4f6fb 100%);
Â  Â  }
Â  Â  body.dark-mode .center-wrapper {
Â  Â  Â  Â  background: linear-gradient(120deg, #232946 0%, #181c2f 100%);
Â  Â  }
Â  Â  .invest-card {
Â  Â  Â  Â  background: var(--card-bg-light);
Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  box-shadow: var(--shadow);
Â  Â  Â  Â  max-width: 440px;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  padding: 2.5rem 2.5rem 2rem 2.5rem;
Â  Â  Â  Â  transition: background 0.3s, color 0.3s;
Â  Â  Â  Â  border: 1.5px solid #e5e7eb;
Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  overflow: hidden;
Â  Â  }
Â  Â  body.dark-mode .invest-card {
Â  Â  Â  Â  background: var(--card-bg-dark);
Â  Â  Â  Â  border-color: #2e335a;
Â  Â  }
Â  Â  .invest-card::before {
Â  Â  Â  Â  content: "";
Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  top: -60px;
Â  Â  Â  Â  right: -60px;
Â  Â  Â  Â  width: 140px;
Â  Â  Â  Â  height: 140px;
Â  Â  Â  Â  background: linear-gradient(135deg, var(--primary-color) 60%, var(--accent) 100%);
Â  Â  Â  Â  opacity: 0.12;
Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  z-index: 0;
Â  Â  }
Â  Â  h2 {
Â  Â  Â  Â  color: var(--primary-color);
Â  Â  Â  Â  margin-bottom: 0.7rem;
Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  font-size: 2rem;
Â  Â  Â  Â  letter-spacing: -0.02em;
Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  position: relative;
Â  Â  }
Â  Â  .info-text {
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  color: #64748b;
Â  Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  position: relative;
Â  Â  }
Â  Â  body.dark-mode .info-text {
Â  Â  Â  Â  color: #cbd5e1;
Â  Â  }
Â  Â  label {
Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  margin-bottom: 0.2rem;
Â  Â  Â  Â  display: block;
Â  Â  Â  Â  color: var(--primary-color);
Â  Â  Â  Â  letter-spacing: 0.01em;
Â  Â  }
Â  Â  input, select, textarea {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  padding: 0.7rem 0.9rem;
Â  Â  Â  Â  margin-top: 0.2rem;
Â  Â  Â  Â  margin-bottom: 1.1rem;
Â  Â  Â  Â  border-radius: 0.7rem;
Â  Â  Â  Â  border: 1.5px solid var(--input-border);
Â  Â  Â  Â  background: var(--input-bg);
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  transition: border-color 0.3s, background 0.3s, color 0.3s;
Â  Â  Â  Â  box-sizing: border-box;
Â  Â  }
Â  Â  input:focus, select:focus, textarea:focus {
Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  border-color: var(--primary-color);
Â  Â  Â  Â  background: #eef2ff;
Â  Â  }
Â  Â  body.dark-mode input,
Â  Â  body.dark-mode select,
Â  Â  body.dark-mode textarea {
Â  Â  Â  Â  background: var(--input-bg-dark);
Â  Â  Â  Â  color: var(--text-dark);
Â  Â  Â  Â  border-color: var(--input-border-dark);
Â  Â  }
Â  Â  body.dark-mode input:focus,
Â  Â  body.dark-mode select:focus,
Â  Â  body.dark-mode textarea:focus {
Â  Â  Â  Â  background: #232946;
Â  Â  }
Â  Â  button.btn-primary {
Â  Â  Â  Â  background: linear-gradient(90deg, var(--primary-color) 0%, var(--accent) 100%);
Â  Â  Â  Â  border: none;
Â  Â  Â  Â  border-radius: 0.9rem;
Â  Â  Â  Â  padding: 0.9rem 0;
Â  Â  Â  Â  font-size: 1.15rem;
Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  box-shadow: 0 2px 8px rgba(99,102,241,0.10);
Â  Â  Â  Â  transition: background 0.3s, transform 0.2s;
Â  Â  Â  Â  margin-top: 0.5rem;
Â  Â  Â  Â  letter-spacing: 0.01em;
Â  Â  }
Â  Â  button.btn-primary:hover {
Â  Â  Â  Â  background: linear-gradient(90deg, var(--primary-dark) 0%, #11998e 100%);
Â  Â  Â  Â  transform: translateY(-2px) scale(1.01);
Â  Â  }
Â  Â  button.btn-primary:disabled {
Â  Â  Â  Â  background: #cbd5e1;
Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  transform: none;
Â  Â  Â  Â  box-shadow: none;
Â  Â  }
Â  Â  body.dark-mode button.btn-primary:disabled {
Â  Â  Â  Â  background: #4a5568;
Â  Â  }
Â  Â  .alert {
Â  Â  Â  Â  background: var(--alert-bg);
Â  Â  Â  Â  color: var(--alert-text);
Â  Â  Â  Â  border-radius: 0.7rem;
Â  Â  Â  Â  padding: 0.8rem 1.2rem;
Â  Â  Â  Â  margin-bottom: 1.1rem;
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  border: none;
Â  Â  Â  Â  box-shadow: 0 1px 4px rgba(99,102,241,0.07);
Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  z-index: 2;
Â  Â  }
Â  Â  .alert-success { background: #d1fae5; color: #065f46; }
Â  Â  .alert-danger { background: #fee2e2; color: #991b1b; }
Â  Â  .alert-warning { background: #fef9c3; color: #92400e; }
Â  Â  .alert-info { background: #e0e7ff; color: #3730a3; }
Â  Â  body.dark-mode .alert {
Â  Â  Â  Â  background: var(--alert-bg-dark);
Â  Â  Â  Â  color: var(--alert-text-dark);
Â  Â  }
Â  Â  body.dark-mode .alert-success { background: #134e4a; color: #6ee7b7; }
Â  Â  body.dark-mode .alert-danger { background: #7f1d1d; color: #fecaca; }
Â  Â  body.dark-mode .alert-warning { background: #78350f; color: #fde68a; }
Â  Â  body.dark-mode .alert-info { background: #373a53; color: #a5b4fc; }
Â  Â  .btn-close {
Â  Â  Â  Â  background: none;
Â  Â  Â  Â  border: none;
Â  Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  Â  color: #64748b;
Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  top: 0.7rem;
Â  Â  Â  Â  right: 1rem;
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  z-index: 3;
Â  Â  }
Â  Â  @media (max-width: 600px) {
Â  Â  Â  Â  .invest-card {
Â  Â  Â  Â  Â  Â  padding: 1.2rem 0.7rem 1rem 0.7rem;
Â  Â  Â  Â  Â  Â  max-width: 98vw;
Â  Â  Â  Â  }
Â  Â  Â  Â  .center-wrapper {
Â  Â  Â  Â  Â  Â  padding: 0.5rem;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  /* Styles for loading spinner */
Â  Â  .spinner {
Â  Â  Â  Â  border: 4px solid rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  border-left-color: #6366f1;
Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  width: 24px;
Â  Â  Â  Â  height: 24px;
Â  Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  vertical-align: middle;
Â  Â  Â  Â  margin-right: 8px;
Â  Â  }

Â  Â  @keyframes spin {
Â  Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  Â  100% { transform: rotate(360deg); }
Â  Â  }

Â  Â  /* Modal styles */
Â  Â  .modal-overlay {
Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.6);
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  visibility: hidden;
Â  Â  Â  Â  transition: opacity 0.3s ease, visibility 0.3s ease;
Â  Â  }
Â  Â  .modal-overlay.show {
Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  visibility: visible;
Â  Â  }
Â  Â  .modal-content {
Â  Â  Â  Â  background-color: white;
Â  Â  Â  Â  padding: 2.5rem;
Â  Â  Â  Â  border-radius: 1rem;
Â  Â  Â  Â  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
Â  Â  Â  Â  max-width: 400px;
Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  transform: translateY(-20px);
Â  Â  Â  Â  transition: transform 0.3s ease;
Â  Â  }
Â  Â  .modal-overlay.show .modal-content {
Â  Â  Â  Â  transform: translateY(0);
Â  Â  }
Â  Â  body.dark-mode .modal-content {
Â  Â  Â  Â  background-color: var(--card-bg-dark);
Â  Â  Â  Â  color: var(--text-dark);
Â  Â  }
Â  Â  .modal-content h3 {
Â  Â  Â  Â  font-size: 1.75rem;
Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  color: var(--primary-color);
Â  Â  Â  Â  margin-bottom: 1rem;
Â  Â  }
Â  Â  .modal-content p {
Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  color: #4a5568;
Â  Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  }
Â  Â  body.dark-mode .modal-content p {
Â  Â  Â  Â  color: #cbd5e1;
Â  Â  }
Â  Â  .modal-buttons {
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  gap: 1rem;
Â  Â  }
Â  Â  .modal-buttons button {
Â  Â  Â  Â  padding: 0.8rem 1.5rem;
Â  Â  Â  Â  border-radius: 0.7rem;
Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  transition: background-color 0.2s, transform 0.2s;
Â  Â  }
Â  Â  .modal-buttons .btn-confirm {
Â  Â  Â  Â  background-color: var(--primary-color);
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  border: none;
Â  Â  }
Â  Â  .modal-buttons .btn-confirm:hover {
Â  Â  Â  Â  background-color: var(--primary-dark);
Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  }
Â  Â  .modal-buttons .btn-cancel {
Â  Â  Â  Â  background-color: #e2e8f0;
Â  Â  Â  Â  color: #4a5568;
Â  Â  Â  Â  border: 1px solid #cbd5e1;
Â  Â  }
Â  Â  body.dark-mode .modal-buttons .btn-cancel {
Â  Â  Â  Â  background-color: #3b4252;
Â  Â  Â  Â  color: var(--text-dark);
Â  Â  Â  Â  border-color: #4a5568;
Â  Â  }
Â  Â  .modal-buttons .btn-cancel:hover {
Â  Â  Â  Â  background-color: #cbd5e1;
Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  }

Â  Â  /* Terms Modal Specific Styles */
Â  Â  #termsModal .modal-content {
Â  Â  Â  Â  max-height: 90vh;
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  max-width: 500px; /* Adjust as needed for terms */
Â  Â  Â  Â  margin-bottom: 1rem; /* Space between content and footer controls */
Â  Â  }
Â  Â  #termsModal .modal-content .close {
Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  top: 1rem;
Â  Â  Â  Â  right: 1rem;
Â  Â  Â  Â  font-size: 1.5rem;
Â  Â  Â  Â  cursor: pointer;
Â  Â  }
Â  Â  #termsModal .modal-content h2 {
Â  Â  Â  Â  font-size: 1.3rem;
Â  Â  Â  Â  margin-bottom: 1rem;
Â  Â  Â  Â  color: var(--primary-color); /* Ensure terms title matches theme */
Â  Â  }
Â  Â  #termsModal .terms-scrollable-content {
Â  Â  Â  Â  flex: 1 1 auto;
Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  font-size: 0.92rem;
Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  line-height: 1.6;
Â  Â  Â  Â  padding-right: 0.5rem;
Â  Â  Â  Â  border-radius: 0.5rem;
Â  Â  Â  Â  border: 1px solid #eee;
Â  Â  Â  Â  background: #fafbfc;
Â  Â  Â  Â  text-align: left; /* Ensure text aligns left in scrollable area */
Â  Â  }
Â  Â  body.dark-mode #termsModal .terms-scrollable-content {
Â  Â  Â  Â  color: var(--text-dark);
Â  Â  Â  Â  background: #0f1c13;
Â  Â  Â  Â  border-color: var(--input-border-dark);
Â  Â  }
Â  Â  #termsModal .modal-footer-controls {
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  gap: 0.8rem;
Â  Â  Â  Â  margin-top: 1.2rem;
Â  Â  Â  Â  width: 90%; /* Match width of modal-content */
Â  Â  Â  Â  max-width: 400px; /* Match max-width of modal-content */
Â  Â  Â  Â  padding: 0 2.5rem; /* Match padding of modal-content */
Â  Â  Â  Â  box-sizing: border-box; /* Include padding in width */
Â  Â  }
Â  Â  #termsModal label {
Â  Â  Â  Â  margin-bottom: 0; /* Override default label margin */
Â  Â  Â  Â  color: var(--text-light); /* Ensure label color is correct */
Â  Â  Â  Â  display: flex; /* Make sure checkbox and text are inline */
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  justify-content: center; /* Center the checkbox and text */
Â  Â  }
Â  Â  body.dark-mode #termsModal label {
Â  Â  Â  Â  color: var(--text-dark);
Â  Â  }
Â  Â  #termsModal input[type="checkbox"] {
Â  Â  Â  Â  width: auto;
Â  Â  Â  Â  margin-bottom: 0;
Â  Â  Â  Â  margin-right: 0.5rem; /* Space between checkbox and text */
Â  Â  }

</style>

<div class="center-wrapper">
Â  Â  <div class="invest-card">
Â  Â  Â  Â  <h2>Investment Form</h2>
Â  Â  Â  Â  <p class="info-text">You have selected the <strong>{{ tier }}</strong> investment tier. Please fill out the details below to proceed.</p>

Â  Â  Â  Â  Â  Â  Â  Â  {% with messages = get_flashed_messages(with_categories=true) %}
Â  Â  Â  Â  Â  Â  {% if messages %}
Â  Â  Â  Â  Â  Â  Â  Â  {% for category, message in messages %}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{ message }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="btn-close" aria-label="Close">&times;</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  {% endfor %}
Â  Â  Â  Â  Â  Â  {% endif %}
Â  Â  Â  Â  {% endwith %}

Â  Â  Â  Â  Â  Â  Â  Â  <div id="ajax-messages" class="mb-6"></div>

Â  Â  Â  Â  <form id="investmentForm" method="post">

{# Removed action as it's set dynamically #}
Â  Â  Â  Â  Â  Â  <label for="full_name">Full Name</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="full_name" name="full_name" placeholder="John Doe" required autocomplete="name" value="{{ user.full_name if user else '' }}">

Â  Â  Â  Â  Â  Â  <label for="email">Email Address</label>
Â  Â  Â  Â  Â  Â  <input type="email" id="email" name="email" placeholder="you@example.com" required autocomplete="email" value="{{ user.email if user else '' }}">

Â  Â  Â  Â  Â  Â  <label for="amount">Investment Amount (KES)</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="amount" name="amount" step="any" min="0"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {% if tier == 'Starter' %}value="3000" readonly{% elif tier == 'Growth' %}value="10000" readonly{% elif tier == 'Premium' %}value="50000" readonly{% endif %}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {% if tier != 'Custom' %}bg-gray-50 text-gray-600 cursor-not-allowed{% endif %}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â required>
Â  Â  Â  Â  Â  Â  {% if tier != 'Custom' %}
Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: 0.9rem; color: #64748b; margin-top: -0.8rem; margin-bottom: 1.1rem;">This amount is fixed for the {{ tier }} tier.</p>
Â  Â  Â  Â  Â  Â  {% endif %}

Â  Â  Â  Â  Â  Â  <label for="target_amount">Target Investment Goal (Optional KES)</label>
Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" class="form-control" id="target_amount" name="target_amount" placeholder="e.g., 500000 (your overall goal)">
Â  Â  Â  Â  Â  Â  <small class="form-text text-muted">Set a goal for your total investment over time.</small>

Â  Â  Â  Â  Â  Â  <label for="investment_purpose">Investment Purpose / Notes</label>
Â  Â  Â  Â  Â  Â  <textarea id="investment_purpose" name="investment_purpose" rows="3" placeholder="Describe your investment goals (optional)"></textarea>

Â  Â  Â  Â  Â  Â  <button type="submit" class="btn-primary" id="submitButton" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  <span id="buttonText">Proceed to Pay</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span id="loadingSpinner" class="spinner hidden"></span>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </form>
Â  Â  </div>
</div>

<div id="termsModal" class="modal-overlay">
Â  <div class="modal-content">
Â  Â  <span class="close" role="button" aria-label="Close modal">&times;</span>
Â  Â  <h2 id="modal-title" style="font-size: 1.3rem; margin-bottom: 1rem;">ðŸ“„ Investment Terms and Conditions</h2>
Â  Â  <div class="terms-scrollable-content" style="max-height: 60vh; overflow-y: auto; padding-right: 1rem; text-align:left;">
Â  Â  Â  <ol style="margin: 0; padding-left: 1.2rem;">

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Introduction:</strong> These Terms and Conditions ("Terms") govern the use of the services provided by Amsa Developers Limited, including interest-paying investment services and other related financial offerings. Use of our services implies full acceptance of these binding Terms, our Privacy Policy and any signed agreements.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Eligibility:</strong> To access our services, you must:
Â  Â  Â  Â  Â  <ol type="a">
Â  Â  Â  Â  Â  Â  <li>Be at least 18 years old.</li>
Â  Â  Â  Â  Â  Â  <li>Have legal capacity to enter contracts.</li>
Â  Â  Â  Â  Â  Â  <li>Be a Kenyan citizen or authorized to transact in Kenya.</li>
Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Our Services:</strong> We offer the following:
Â  Â  Â  Â  Â  <ol type="a">
Â  Â  Â  Â  Â  Â  <li>Investment Plans: Structured short- and long-term investment opportunities with fixed interest.</li>
Â  Â  Â  Â  Â  Â  <li>Interest-Paying Services: Fixed-return plans with weekly, monthly, quarterly, or lump-sum payouts.</li>
Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Investment & Interest Terms:</strong>
Â  Â  Â  Â  Â  <ol type="a">
Â  Â  Â  Â  Â  Â  <li><strong>Investment Agreement:</strong> Each investment is governed by a signed contract outlining:
Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Principal amount</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Interest rate</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Tenure (6, 12, 24, 36, 48 months)</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Payout schedule (weekly, monthly, quarterly, at maturity)</li>
Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  <li><strong>Interest Payments:</strong>
Â  Â  Â  Â  Â  Â  Â  <ol type="i">
Â  Â  Â  Â  Â  Â  Â  Â  <li>Interest is paid via bank or mobile money according to agreed schedules.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>In case of delayed payments due to technical or business constraints, clients will be informed and payments updated as per agreement.</li>
Â  Â  Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Principal Refund Policy:</strong>
Â  Â  Â  Â  Â  <ol type="a">
Â  Â  Â  Â  Â  Â  <li><strong>Voluntary Exit:</strong> Investors may request an early exit before maturity, subject to:
Â  Â  Â  Â  Â  Â  Â  <ol type="i">
Â  Â  Â  Â  Â  Â  Â  Â  <li>7 working daysâ€™ written notice.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>A penalty deduction of 10% on the principal if withdrawn early.</li>
Â  Â  Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  <li><strong>Non-Performance:</strong> If the Company fails to meet investment terms (e.g., interest or capital repayment), the principal shall be refunded in full within 60 days, unless force majeure applies.</li>
Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Lock-in Period:</strong> The principal will have a lock-in period of six (6) months during which time it will not be possible to withdraw. If the investor chooses to withdraw within this period then article 5(a) will apply.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Management Fee:</strong> The fund shall charge a standard 5% management fee on the average gross return.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Statements:</strong> Each investor will receive an account statement on a quarterly basis.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Compounded Returns:</strong> The interest returns will be compounded on a quarterly basis.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Audits:</strong> The investment fund is subject to audits annually and on a semi-annual basis and/or as recommended by the regulatory authority.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Payment Channels:</strong> All payments must be made through:
Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  <li>Bank transfers to our official accounts.</li>
Â  Â  Â  Â  Â  Â  <li>Company M-PESA paybill number.</li>
Â  Â  Â  Â  Â  Â  <li>Receipts must be retained as proof of payment.</li>
Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>KYC and Compliance:</strong> You are required to provide:
Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  <li>Photo of National ID or Passport</li>
Â  Â  Â  Â  Â  Â  <li>KRA PIN certificate</li>
Â  Â  Â  Â  Â  Â  <li>Phone number</li>
Â  Â  Â  Â  Â  Â  <li>Alternative phone number</li>
Â  Â  Â  Â  Â  Â  <li>Next of kin and their contact details</li>
Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  We reserve the right to reject or suspend service for non-compliance or suspected fraud.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Risk Acknowledgment:</strong>
Â  Â  Â  Â  Â  <ol type="a">
Â  Â  Â  Â  Â  Â  <li>All investment involves risk. Amsa investment fund has mitigated this risk by having a diversification of asset classes to ensure capital protection guaranteeing an average net return of 24% and a gross of 29%.</li>
Â  Â  Â  Â  Â  Â  <li>The investor agrees not to hold the Company liable for market-related fluctuations or regulatory delays.</li>
Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Force Majeure:</strong> The Company is not liable for delays or failure in performance due to circumstances beyond our control, including but not limited to natural disasters, government actions, or financial market collapse.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Dispute Resolution:</strong>
Â  Â  Â  Â  Â  <ol type="a">
Â  Â  Â  Â  Â  Â  <li>All disputes will first be addressed amicably within 14 days.</li>
Â  Â  Â  Â  Â  Â  <li>If unresolved, parties may proceed to mediation/arbitration as per the Arbitration Act of Kenya (1995).</li>
Â  Â  Â  Â  Â  Â  <li>The Courts of Kenya shall have final jurisdiction.</li>
Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Amendments:</strong> We reserve the right to update or change these Terms. Clients will be informed in writing or via official channels. Continued use of our services constitutes acceptance of any revisions.
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Governing Law:</strong> These Terms shall be governed and interpreted under the laws of the Republic of Kenya, including but not limited to:
Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  <li>The Investment Promotion Act</li>
Â  Â  Â  Â  Â  Â  <li>The Data Protection Act (2019)</li>
Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  </li>

Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  <strong>Client Agreement Contract:</strong>
Â  Â  Â  Â  Â  <ol type="a">
Â  Â  Â  Â  Â  Â  <li><strong>Nature of Engagement:</strong> Client agrees to engage in investment in income-generating ventures with fixed interest.</li>
Â  Â  Â  Â  Â  Â  <li><strong>Refund and Exit Terms:</strong>
Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Early withdrawal permitted with 7-day notice.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Penalty of 10% on principal will apply.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Principal refunded in full in case of Company non-performance within 60 days.</li>
Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  <li><strong>Obligations of the Company:</strong>
Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Remit agreed interest as per schedule.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Maintain confidentiality and comply with Kenyan data protection laws.</li>
Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  <li><strong>Obligations of the Client:</strong>
Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Timely payment of investments.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Provide accurate KYC documents.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Abide by refund and investment terms.</li>
Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  <li><strong>Governing Law:</strong> This Agreement is governed by Kenyan law. Disputes shall be resolved per Clause 15 of the Terms and Conditions.</li>
Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  </li>

Â  Â  Â  </ol>
Â  Â  </div>
Â  </div>
Â  Â  <div class="modal-footer-controls">
Â  Â  Â  Â  <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.98rem;">
Â  Â  Â  Â  Â  Â  <input type="checkbox" id="agreeCheckbox" style="accent-color: #28a745;">
Â  Â  Â  Â  Â  Â  <span>I have read and agree to the <strong>Terms and Conditions</strong>.</span>
Â  Â  Â  Â  </label>
Â  Â  Â  Â  <div class="modal-buttons">
Â  Â  Â  Â  Â  Â  <button id="continueTermsBtn" class="btn-confirm" disabled>Continue</button>
Â  Â  Â  Â  Â  Â  <button id="cancelTermsBtn" class="btn-cancel">Cancel</button>
Â  Â  Â  Â  </div>
Â  Â  </div>
</div>

<div id="paymentModal" class="modal-overlay">
Â  Â  <div class="modal-content">
Â  Â  Â  Â  <h3>Payment Initiated!</h3>
Â  Â  Â  Â  <p id="modal-phone-message">Please check your phone ({{ user.phone_number if user else 'your registered number' }}) for the M-Pesa PIN prompt. Complete the payment on your phone to proceed.</p>
Â  Â  Â  Â  <div class="modal-buttons">
Â  Â  Â  Â  Â  Â  <button id="confirmPaymentBtn" class="btn-confirm">
Â  Â  Â  Â  Â  Â  Â  Â  <span id="confirmButtonText">I have paid</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span id="confirmSpinner" class="spinner hidden"></span>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button id="cancelPaymentBtn" class="btn-cancel">Cancel</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="modal-messages" class="mt-4 text-sm"></div>
Â  Â  </div>
</div>

<script>
Â  Â  if (localStorage.getItem('dark-mode') === 'true') {
Â  Â  Â  Â  document.body.classList.add('dark-mode');
Â  Â  }

Â  Â  const form = document.getElementById('investmentForm');
Â  Â  const formFields = form.querySelectorAll('input, select, textarea');
Â  Â  const submitButton = document.getElementById('submitButton');
Â  Â  const buttonText = document.getElementById('buttonText');
Â  Â  const loadingSpinner = document.getElementById('loadingSpinner');
Â  Â  const ajaxMessagesDiv = document.getElementById('ajax-messages');

Â  Â  const termsModal = document.getElementById('termsModal');
Â  Â  const closeTermsBtn = termsModal.querySelector('.close');
Â  Â  const agreeCheckbox = document.getElementById('agreeCheckbox');
Â  Â  const continueTermsBtn = document.getElementById('continueTermsBtn');
Â  Â  const cancelTermsBtn = document.getElementById('cancelTermsBtn');

Â  Â  const paymentModal = document.getElementById('paymentModal');
Â  Â  const modalPhoneMessage = document.getElementById('modal-phone-message');
Â  Â  const confirmPaymentBtn = document.getElementById('confirmPaymentBtn');
Â  Â  const confirmButtonText = document.getElementById('confirmButtonText');
Â  Â  const confirmSpinner = document.getElementById('confirmSpinner');
Â  Â  const cancelPaymentBtn = document.getElementById('cancelPaymentBtn');
Â  Â  const modalMessagesDiv = document.getElementById('modal-messages');

Â  Â  let currentTransactionId = null;

Â  Â  function displayMessage(message, type, targetDiv = ajaxMessagesDiv) {
Â  Â  Â  Â  const alertDiv = document.createElement('div');
Â  Â  Â  Â  alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
Â  Â  Â  Â  alertDiv.setAttribute('role', 'alert');
Â  Â  Â  Â  alertDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  ${message}
Â  Â  Â  Â  Â  Â  <button type="button" class="btn-close" aria-label="Close">&times;</button>
Â  Â  Â  Â  `;
Â  Â  Â  Â  targetDiv.appendChild(alertDiv);

Â  Â  Â  Â  alertDiv.querySelector('.btn-close').addEventListener('click', function () {
Â  Â  Â  Â  Â  Â  alertDiv.style.display = 'none';
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function toggleFormFields(disabled) {
Â  Â  Â  Â  formFields.forEach(el => {
Â  Â  Â  Â  Â  Â  el.disabled = disabled;
Â  Â  Â  Â  });
Â  Â  Â  Â  // Only enable/disable the submit button if it's not the terms modal that's controlling it
Â  Â  Â  Â  if (!termsModal.classList.contains('show')) {
Â  Â  Â  Â  Â  Â  submitButton.disabled = disabled || !agreeCheckbox.checked;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  // Show terms modal on page load
Â  Â  Â  Â  termsModal.classList.add('show');
Â  Â  Â  Â  // Disable form fields and the submit button initially
Â  Â  Â  Â  toggleFormFields(true);
Â  Â  Â  Â  submitButton.disabled = true; // Explicitly disable submit button

Â  Â  Â  Â  agreeCheckbox.onchange = () => {
Â  Â  Â  Â  Â  Â  continueTermsBtn.disabled = !agreeCheckbox.checked;
Â  Â  Â  Â  };

Â  Â  Â  Â  closeTermsBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  // Redirect if terms are not accepted
Â  Â  Â  Â  Â  Â  if (!agreeCheckbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = "{{ url_for('main.invest_form') }}"; // Or a more appropriate landing page
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  termsModal.classList.remove('show');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  cancelTermsBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  window.location.href = "{{ url_for('main.invest_form') }}"; // Or a more appropriate landing page
Â  Â  Â  Â  };

Â  Â  Â  Â  continueTermsBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  if (agreeCheckbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  termsModal.classList.remove('show');
Â  Â  Â  Â  Â  Â  Â  Â  toggleFormFields(false); // Enable form fields
Â  Â  Â  Â  Â  Â  Â  Â  submitButton.disabled = false; // Enable the submit button
Â  Â  Â  Â  Â  Â  Â  Â  displayMessage('Terms and Conditions accepted. You can now proceed with your investment details.', 'success');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  displayMessage('You must agree to the Terms and Conditions to proceed.', 'warning', termsModal.querySelector('.modal-content')); // Display warning inside modal content
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // Prevent closing the terms modal by clicking outside unless explicitly allowed
Â  Â  Â  Â  termsModal.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  if (e.target === termsModal && !agreeCheckbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = "{{ url_for('main.invest_form') }}";
Â  Â  Â  Â  Â  Â  } else if (e.target === termsModal && agreeCheckbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  termsModal.classList.remove('show');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  });


Â  Â  form.addEventListener('submit', async function (event) {
Â  Â  Â  Â  event.preventDefault();

Â  Â  Â  Â  ajaxMessagesDiv.innerHTML = '';
Â  Â  Â  Â  modalMessagesDiv.innerHTML = '';

Â  Â  Â  Â  submitButton.disabled = true;
Â  Â  Â  Â  buttonText.textContent = 'Initiating...';
Â  Â  Â  Â  loadingSpinner.classList.remove('hidden');

Â  Â  Â  Â  const formData = new FormData(form);
Â  Â  Â  Â  const data = {};
Â  Â  Â  Â  for (let [key, value] of formData.entries()) {
Â  Â  Â  Â  Â  Â  data[key] = value;
Â  Â  Â  Â  }
Â  Â  Â  Â  data['tier'] = "{{ tier }}";

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const actionUrl = "{{ url_for('main.invest_form') }}";
Â  Â  Â  Â  Â  Â  const response = await fetch(actionUrl, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(data)
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const result = await response.json();

Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  if (result.status === 'success') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentTransactionId = result.transaction_id;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  modalPhoneMessage.textContent = `Please check your phone ({{ user.phone_number if user else 'your registered number' }}) for the M-Pesa PIN prompt. Complete the payment on your phone to proceed.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  paymentModal.classList.add('show');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toggleFormFields(true);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayMessage(result.message || 'An unknown error occurred.', 'danger');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  displayMessage(result.error || result.message || 'Server error occurred.', 'danger');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Fetch error:', error);
Â  Â  Â  Â  Â  Â  displayMessage('Network error. Please try again.', 'danger');
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  submitButton.disabled = false;
Â  Â  Â  Â  Â  Â  buttonText.textContent = 'Proceed to Pay';
Â  Â  Â  Â  Â  Â  loadingSpinner.classList.add('hidden');
Â  Â  Â  Â  }
Â  Â  });

Â  Â  confirmPaymentBtn.addEventListener('click', async function () {
Â  Â  Â  Â  if (!currentTransactionId) {
Â  Â  Â  Â  Â  Â  displayMessage('No active payment to confirm.', 'danger', modalMessagesDiv);
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  modalMessagesDiv.innerHTML = '';

Â  Â  Â  Â  confirmPaymentBtn.disabled = true;
Â  Â  Â  Â  confirmButtonText.textContent = 'Checking...';
Â  Â  Â  Â  confirmSpinner.classList.remove('hidden');

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch(`/check_payment_status/${currentTransactionId}`);
Â  Â  Â  Â  Â  Â  const result = await response.json();

Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  if (result.status === 'COMPLETED') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayMessage('Payment confirmed successfully! Redirecting to dashboard...', 'success', modalMessagesDiv);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = "{{ url_for('main.dashboard') }}";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 2000);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (result.status === 'PENDING') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayMessage('Payment is still pending. Please wait a moment and try again if the M-Pesa prompt hasn\'t appeared or completed.', 'warning', modalMessagesDiv);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayMessage(`Payment status: ${result.status}. Please check your M-Pesa messages or contact support if issue persists.`, 'danger', modalMessagesDiv);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  displayMessage(result.message || 'Error checking payment status.', 'danger', modalMessagesDiv);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Error checking payment status:', error);
Â  Â  Â  Â  Â  Â  displayMessage('Network error while checking status. Please try again.', 'danger', modalMessagesDiv);
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  confirmPaymentBtn.disabled = false;
Â  Â  Â  Â  Â  Â  confirmButtonText.textContent = 'I have paid';
Â  Â  Â  Â  Â  Â  confirmSpinner.classList.add('hidden');
Â  Â  Â  Â  }
Â  Â  });

Â  Â  cancelPaymentBtn.addEventListener('click', () => {
Â  Â  Â  Â  paymentModal.classList.remove('show');
Â  Â  Â  Â  toggleFormFields(false);
Â  Â  Â  Â  displayMessage('Payment initiation cancelled.', 'info');
Â  Â  Â  Â  currentTransactionId = null;
Â  Â  });
</script>

{% endblock %}
